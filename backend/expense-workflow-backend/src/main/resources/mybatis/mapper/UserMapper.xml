<?xml version="1.0" encoding="UTF-8" ?> <!-- XML宣言（文字コードを明示する） -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd"> <!-- MyBatisのDTDを指定する -->
<mapper namespace="com.example.expenseworkflow.mapper.UserMapper"> <!-- このXMLが対応するMapperインターフェースを指定する -->
  <resultMap id="UserResultMap" type="com.example.expenseworkflow.domain.User"> <!-- usersテーブル→Userへのマッピング定義を作る -->
    <id column="id" property="id" /> <!-- PK(id)をUser.idへ詰める -->
    <result column="email" property="email" /> <!-- emailをUser.emailへ詰める -->
    <result column="password_hash" property="passwordHash" /> <!-- password_hashをUser.passwordHashへ詰める -->
    <result column="name" property="name" /> <!-- nameをUser.nameへ詰める -->
    <result column="role" property="role" /> <!-- roleをUser.roleへ詰める -->
    <result column="manager_id" property="managerId" /> <!-- manager_idをUser.managerIdへ詰める -->
    <result column="is_active" property="isActive" /> <!-- is_activeをUser.isActiveへ詰める -->
    <result column="created_at" property="createdAt" /> <!-- created_atをUser.createdAtへ詰める -->
    <result column="updated_at" property="updatedAt" /> <!-- updated_atをUser.updatedAtへ詰める -->
  </resultMap> <!-- resultMap終わり -->
  <select id="findByEmail" resultMap="UserResultMap"> <!-- findByEmailメソッドに対応するSELECTを定義する -->
    SELECT <!-- SQL開始 -->
      id, email, password_hash, name, role, manager_id, is_active, created_at, updated_at <!-- 取得するカラムを明示する -->
    FROM users <!-- usersテーブルから取得する -->
    WHERE email = #{email} <!-- 引数emailに一致する行を取る -->
    LIMIT 1 <!-- 1件だけ取得する -->
  </select> <!-- select終わり -->
</mapper> <!-- mapper終わり -->
